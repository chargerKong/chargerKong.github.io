---
title: 激光雷达数据处理
date: 2021-05-30 23:24:35
tags: 激光SLAM
---

# 激光雷达的数据处理

机器人在运动的时候会导致激光雷达的数据发生畸变，畸变的话，匹配就可能导致匹配出错，基本上就会是导致匹配出错，错误的数据匹配肯定得到错误的位姿。

如果没有去畸变的话，基本上就不能可以建图，因为前段的匹配是很差的。



## 概念介绍

激光雷达传感器原理

- 三角测距原理：如果距离太远的话，效果不好，易受干扰、适用于室内的场景。大概也就5-6米
- TOF测距原理：time of fly。发射光的速度乘时间即可，只和设备的时间检测精度有关。只要把时间测准了，问题就不大，室内外通用
- 测量相位差，根据波形的相位差比上周期就是时间。相位差比时间更容易测量



## 模型

- 光束模型

  用的不多，有比较多的缺点，raytracing（计算每一个位姿下K个光束的扫描路径，栅格地图一个个的去寻找，费时间），微小的位姿会造成期望值巨大的改变。AMCL中，光束模型一般不用

- 似然场模型

  不需要计算raytracing，计算量较低，基本上都是用整个模型



## 运动畸变

产生的原因

- 激光数据不是瞬时获得的
- 激光测量伴随着机器人的运动
- 激光的帧率比较低的时候，机器人的运动不能忽略



# 畸变去除

ICP方法。迭代最近点

匹配两帧的点云，使得旋转和平移之后两帧的误差最小。如果我们知道两个对应点对，直接利用R和t得答案，一步到位

- 实际中，不知道对应点匹配
- 通过迭代可以计算出来，EM算法的一个特例

在这里，默认激光数据是准确的。但是实际山没有考虑运动畸变的话，激光数据是错误的



VICP方法。（velocity ICP）

- 考虑了机器人的运动
- 假设为匀速运动
- 进行匹配的同时还估计了机器人的速度

缺点：

- 当低帧率（5hz）的时候，匀速运动假设是不成立的
- 耦合了数据预处理和状态估计过程，不适合模块化的设计



里程计辅助方法

- 需要尽可能的反应运动情况
- 实现预处理和状态估计的解耦



因此需要传感器辅助方法，（里程计和IMU）

- 极高的更新频率
- 较高的局部位姿估计
- 预处理和状态估计解耦



IMU

问题：角速度测量精度高，虽然有极高的测量频率，但是线加速度精度太低，两次积分后基本废



轮式里程计 

直接测量假期人的位移和角度

较高的局部角度测量精度和局部位置测量精度

100-200hz的更新速度，

这里的优点是局部位置测量精度！



在处理器上，需要进行时间同步cpu和单片机的时间戳需要同步，和位姿插值



运动畸变去除-轮式里程计

轮式里程计激光去除

轮式方法和匹配方法的结合

当运动速度不是特别快，里程计的就够了